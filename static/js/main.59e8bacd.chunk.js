(this["webpackJsonpbooking-app"]=this["webpackJsonpbooking-app"]||[]).push([[0],{130:function(e,t,a){},131:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(30),r=a.n(o),s=a(10),l=a(17),m=(a(76),a(21)),i=(a(77),a(78),a(49)),u=a.n(i),p=a(67),h=a(68),b=a(25),f=a.n(b),d=(a(127),f()().format().slice(0,10)),_=d.slice(0,8),E=Number(d.slice(-2))+1,g="".concat(_).concat(2===E.toString().length?"":"0").concat(E),v=function(e){return f()(e||d).format().slice(0,10)},N=function(e){return f()(e||g).format().slice(0,10)},y=function(e,t){return f()(1e3*e).locale("ru").format(t)};function x(){var e=Object(l.f)(),t=Object(n.useState)(""),a=Object(m.a)(t,2),o=a[0],r=a[1],s=Object(n.useState)(""),i=Object(m.a)(s,2),b=i[0],f=i[1],d=Object(n.useState)(""),_=Object(m.a)(d,2),E=_[0],g=_[1];return c.a.createElement("header",{className:"header container"},c.a.createElement("form",{className:"search-form",onSubmit:function(t){return function(t){t.preventDefault(),o.trim()&&b&&E&&e.push("/results/".concat(o,"/").concat(v(b),"/").concat(N(E)))}(t)}},c.a.createElement("input",{className:"search-form__search",value:o,type:"text",placeholder:"Where are you going?",onChange:function(e){return function(e){var t=e.target;r(t.value)}(e)}}),c.a.createElement(u.a,{className:"search-form__date",selected:b,onChange:function(e){return f(e)},selectsStart:!0,startDate:b,endDate:E,placeholderText:"check in"}),c.a.createElement(u.a,{className:"search-form__date",selected:E,onChange:function(e){return g(e)},selectsEnd:!0,endDate:E,minDate:b,placeholderText:"check out"}),c.a.createElement("button",{type:"submit",className:"search-form__button"},c.a.createElement(p.a,{className:"icon-comment",icon:h.a,size:"lg"}))))}a(130);function w(){return c.a.createElement("section",{className:"cities container"},c.a.createElement("div",{className:"box-one"},c.a.createElement(s.b,{to:"/results/kyiv/".concat(d,"/").concat(g),className:"box-one__item"},c.a.createElement("img",{className:"box-one__img",src:"https://photo.hotellook.com/static/cities/960x720/IEV.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-one__name"},"Kyiv")),c.a.createElement(s.b,{to:"/results/kharkiv/".concat(d,"/").concat(g),className:"box-one__item"},c.a.createElement("img",{className:"box-one__img",src:"https://photo.hotellook.com/static/cities/960x720/HRK.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-one__name"},"Kharkiv"))),c.a.createElement("div",{className:"box-two"},c.a.createElement(s.b,{to:"/results/lviv/".concat(d,"/").concat(g),className:"box-two__item"},c.a.createElement("img",{className:"box-two__img",src:"https://photo.hotellook.com/static/cities/960x720/LWO.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-two__name"},"Lviv")),c.a.createElement(s.b,{to:"/results/odessa/".concat(d,"/").concat(g),className:"box-two__item"},c.a.createElement("img",{className:"box-two__img",src:"https://photo.hotellook.com/static/cities/960x720/ODS.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-two__name"},"Odessa")),c.a.createElement(s.b,{to:"/results/dnipro/".concat(d,"/").concat(g),className:"box-two__item"},c.a.createElement("img",{className:"box-two__img",src:"https://photo.hotellook.com/static/cities/960x720/DNK.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-two__name"},"Dnipro"))),c.a.createElement("div",{className:"box-three"},c.a.createElement(s.b,{to:"/results/chernivtsi/".concat(d,"/").concat(g),className:"box-three__item"},c.a.createElement("img",{className:"box-three__img",src:"https://photo.hotellook.com/static/cities/960x720/CWC.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-three__name"},"Chernivtsi")),c.a.createElement(s.b,{to:"/results/vienna/".concat(d,"/").concat(g),className:"box-three__item"},c.a.createElement("img",{className:"box-three__img",src:"https://photo.hotellook.com/static/cities/960x720/VIE.jpg",alt:"no comments"}),c.a.createElement("span",{className:"box-three__name"},"Vienna"))))}a(131);var k=a(28),j=a.n(k),O=a(70),D=a(54),C=a(29),S=a.n(C);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W={getHotelsInCity:function(){var e=Object(D.a)(j.a.mark((function e(t,a){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("http://engine.hotellook.com/api/v2/lookup.json",{params:I({lang:"en",lookFor:"city",limit:"1",convertCase:"1"},t)}).then((function(e){return e.data.results.locations[0].id})).catch((function(e){return console.error(e)}));case 2:return n=e.sent,e.next=5,S.a.get("http://yasen.hotellook.com/tp/public/widget_location_dump.json",{params:I({currency:"rub",language:"ru",limit:"50",id:n,type:"popularity",token:"2e008ed683b1d0b7bde67d99528f808d"},a)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getWatherInCity:function(){var e=Object(D.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("http://engine.hotellook.com/api/v2/lookup.json",{params:I({lang:"en",lookFor:"city",limit:"1",convertCase:"1"},t)}).then((function(e){return e.data.results.locations[0].cityName})).catch((function(e){return console.error(e)}));case 2:return a=e.sent,e.next=5,S.a.get("https://api.openweathermap.org/data/2.5/forecast/daily",{params:{units:"metric",cnt:"16",appid:"47fe20af59af3bbf2a3b306a18fdb1d7",q:a}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K=(a(149),a(150),{rain:"rain",clear:"clear",clouds:"cloudy",snow:"snow",unknown:"unknown"}),T=function(e){return K[e||"unknown"]};function q(e){var t=e.size,a=e.weatherType;return c.a.createElement(c.a.Fragment,null,c.a.createElement("i",{className:"wu wu-solid-black wu-".concat({small:"32",medium:"64",large:"128"}[t||"small"]," wu-").concat(T(a))}))}function z(e){var t=e.match,a=t.params.searchQuery,o=t.params.startDate,r=t.params.endDate,s=Object(n.useState)([]),l=Object(m.a)(s,2),i=l[0],u=l[1],p=Object(n.useState)([]),h=Object(m.a)(p,2),b=h[0],f=h[1],d=b.filter((function(e){return y(e.dt).slice(0,10)>=o&&y(e.dt).slice(0,10)<=r}));return Object(n.useEffect)((function(){W.getHotelsInCity({query:a},{check_in:o,check_out:r}).then((function(e){var t=e.data.popularity;return u(t)})),W.getWatherInCity({query:a}).then((function(e){var t=e.data.list;return f(t)}))}),[a,o,r]),c.a.createElement("section",{className:"container"},c.a.createElement("div",{className:"hotels"},i.map((function(e){return c.a.createElement("div",{key:e.hotel_id,className:"hotels__item hotel"},c.a.createElement("div",{className:"hotel__info"},c.a.createElement("div",{className:"hotel__name"},e.name),c.a.createElement("div",{className:"hotel__stars"},"\u0437\u0432\u0435\u0437\u0434: ",e.stars),c.a.createElement("div",{className:"hotel__text-date"},"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u0434\u0430\u0442\u0430:"),c.a.createElement("div",{className:"hotel__weather weather"},d.map((function(e){return c.a.createElement("div",{key:e.dt,className:"weather__day"},c.a.createElement("div",{className:"weather__date"},y(e.dt,"D/M")),c.a.createElement("div",null,y(e.dt,"ddd")),c.a.createElement(q,{size:"small",key:e.dt,weatherType:e.weather[0].main.toLowerCase()}),c.a.createElement("div",null,Math.floor(e.temp.day),"\xb0"))})))),c.a.createElement("div",{className:"hotel__photo"},c.a.createElement("img",{src:"https://photo.hotellook.com/image_v2/limit/h".concat(e.hotel_id,"_1/320/210.auto"),alt:"no comments"})))}))))}var F=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(x,null),c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:w}),c.a.createElement(l.a,{path:"/results/:searchQuery/:startDate/:endDate",component:z})))},H=c.a.createElement(s.a,null,c.a.createElement(F,null));r.a.render(H,document.getElementById("root"))},71:function(e,t,a){e.exports=a(151)},76:function(e,t,a){},77:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.59e8bacd.chunk.js.map